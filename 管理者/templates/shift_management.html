<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static',filename='/css/shift_management.css')}}">
    <title>ã‚·ãƒ•ãƒˆç®¡ç†</title>
</head>
<body>
    <header>
        <a href="#" class="titlename">æ¸…æƒç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </a>
        <h3>ãƒ€ã‚¤ãƒ¯ãƒ­ã‚¤ãƒãƒƒãƒˆãƒ›ãƒ†ãƒ«</h3>
    </header>
    <h3 class="up">å‡ºå‹¤æ—¥ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦æ›´æ–°ã—ã¦ãã ã•ã„</h3>
    <h3 class="black">å¸Œæœ›ä¼‘ã«ã¯ğŸ”³ãŒè‡ªå‹•ã§å…¥ã‚Šã¾ã™</h3>
   <table border=1>
    <tr>
        <td>{{ current_year }}å¹´{{ current_month }}æœˆ</td>
        {% for i in range(value): %}
            <th>{{ day_list[i] }}<br>{{ cw_list[i] }}</th>
        {% endfor %}
    </tr>
    <tr>
        {% for i in range(volume): %}
            <td>{{ name[i] }}{{ type[i] }}</td>
        {% endfor %}
        {% for i in range(1, value+1): %}
            <td>
                {% if shift_day[i] %}
                    {{ shift_day[i] }}
                    <input type="checkbox" class="custom-checkbox" id="checkbox_{{ i }}" onclick="changeColor(this, {{ i }})">
                    <script>
                        window.onload = function() {
                            const checkbox = document.getElementById('checkbox_{{ i }}');
                            const td = checkbox.parentElement;
                            if (checkbox.checked) {
                                td.classList.add('checked');
                            } else {
                                td.classList.add('unchecked');
                            }
                        };
                    </script>
                {% endif %}
            </td>
        {% endfor %}
    </tr>
    
    <script>
        function changeColor(checkbox, dayIndex) {
            const td = checkbox.parentElement;
            if (checkbox.checked) {
                td.classList.remove('unchecked');
                td.classList.add('checked');
            } else {
                td.classList.remove('checked');
                td.classList.add('unchecked');
            }
    
            axios.post('/update_shift_status', { dayIndex: dayIndex, checked: checkbox.checked })
                .then(response => {
                    console.log(response.data);
                })
                .catch(error => {
                    console.error(error);
                });
        }
    </script>
    
    
</body>
</html>